**Задание 2. «Сокращатель ссылок»**

Предположим, мы хотим написать свой собственный сокращатель ссылок (такой,
как bit.ly), и попросили вас написать API, который будет реализовывать
основную функциональность сервиса.

Для пользователя должны быть доступны следующие возможности:
1. Создать новую сокращенную ссылку (дать длинную, получить короткую)
2. Перейти по короткой ссылке и быть перенаправленным на исходную длинную ссылку
3. Просмотреть список «своих» ссылок, которые он сокращал
4. Просмотреть статистику переходов по каждой ссылке
 

*Примечание*

Если при решении этой задачи вы будете использовать БД, не забудьте приложить
в README.md инструкции по настройке выбранной вами БД для проверяющего (скрипты
создания таблиц для реляционных БД, конфиги, и прочее).

Задача довольно объемная, поэтому пользовательский интерфейс можно не делать, достаточно API с примерами запросов для каждого действия пользователя.
Пользовательский интерфейс является плюсом, но не является обязательным.

Обратите внимание на время работы основного сценария – открытия короткой ссылки
и превращения ее в длинную. После того, как приложение начнет работать корректно,
протестируйте его скорость работы при помощи утилит нагрузочного тестирования
(wrk, ab и подобных), и попробуйте оптимизировать приложение с точки зрения
скорости работы.

Зафиксируйте в README.md, как и чем тестировали, какие показатели были в начале
работы, какие в итоге, и какие шаги по оптимизации вы предпринимали.

**Запуск приложения**
1) Создать базу данных MySQL
1.1)* (для 3го) Создание базы в Redis
2) Создать файл .env по типу .env.example
2) cd link_shortener_02
3) npm install
4) npm start

**Внимание!** 

*dev1* - 1й вариант

*dev2* - 2й вариант

*v3* - 3й варинат

*master* - пустой

**Описание router**

/ - формирование страницы 'index'

/transitions?link= - Поиск переходов по заданой ссылке

/myShorty - Поиск всех ссылок сокращенных юзером

/toShorty?link= - Сокращение ссылки 

/:link - переадрисация ссылки


**1й вариант**

Для хранения информации о юзере, о ссылках и переходах используется MySQL.
При переходе по короткой ссылке сервер дожидается ответа о записи информации о переходе.

*Тест wrk*

ma-daria@madaria-UX32LA:~/code/WebstormProjects/link_shortener_02$ docker run --rm williamyeh/wrk -t12 -c400 -d30s  http://192.168.1.168:3000/x032bay

Running 30s test @ http://192.168.1.168:3000/x032bay

  12 threads and 400 connections
  
  Thread Stats   Avg      Stdev     Max   +/- Stdev
  
   Latency     1.48s   112.25ms   1.80s    95.55%
    
   Req/Sec    54.86     54.70   323.00     81.49%
    
  7846 requests in 30.08s, 2.95MB read
  
Requests/sec:    260.84

Transfer/sec:    100.36KB


**2й вариант**

Для хранения информации о юзере, о ссылках и переходах используется MySQL.
При переходе по короткой ссылке сервер не дожидается ответа о записи информации о переходе.

*Тест wrk*

ma-daria@madaria-UX32LA:~/code/WebstormProjects/link_shortener_02$ docker run --rm williamyeh/wrk -t12 -c400 -d30s  http://192.168.1.168:3000/x032bay

Running 30s test @ http://192.168.1.168:3000/x032bay

  12 threads and 400 connections
  
  Thread Stats   Avg      Stdev     Max   +/- Stdev
  
   Latency     1.27s   198.22ms   1.38s    88.59%
   
   Req/Sec    50.93     47.18   300.00     77.38%
   
  9057 requests in 30.10s, 3.40MB read
  
Requests/sec:    300.90

Transfer/sec:    115.77KB


**3й вариант**

Короткая и Длинная ссылки хранятся в редисе. поиск длинной для перехода по короткой осуществляется в редисе, если не нашел то в базе MySQL.
Для хранения информации о юзере, о ссылках и переходах используется MySQL.
При переходе по короткой ссылке сервер не дожидается ответа о записи информации о переходе.

*Тест wrk*

ma-daria@madaria-UX32LA:~/code/WebstormProjects/link_shortener_02$ docker run --rm williamyeh/wrk -t12 -c400 -d30s  http://192.168.1.168:3000/x032bay

Running 30s test @ http://192.168.1.168:3000/x032bay

  12 threads and 400 connections
  
  Thread Stats   Avg      Stdev     Max   +/- Stdev
  
   Latency   182.83ms   55.87ms 633.23ms   93.40%
    
   Req/Sec   191.84     95.46   555.00     55.95%
   
  65568 requests in 30.08s, 24.64MB read
  
Requests/sec:   2179.92

Transfer/sec:    838.76KB